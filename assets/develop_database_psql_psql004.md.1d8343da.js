import{_ as s,o as a,c as l,V as n}from"./chunks/framework.a215caf7.js";const o="/docs/assets/image-20230716104034704.09a02713.png",p="/docs/assets/image-20230716104757324.b389cdaf.png",t="/docs/assets/image-20230716114154990.a2a4b757.png",u=JSON.parse('{"title":"PostgreSQL DDL","description":"","frontmatter":{},"headers":[],"relativePath":"develop/database/psql/psql004.md","filePath":"develop/database/psql/psql004.md","lastUpdated":1698766194000}'),e={name:"develop/database/psql/psql004.md"},r=n(`<h1 id="postgresql-ddl" tabindex="-1">PostgreSQL DDL <a class="header-anchor" href="#postgresql-ddl" aria-label="Permalink to &quot;PostgreSQL DDL&quot;">​</a></h1><h2 id="_1-数据库操作" tabindex="-1">1. 数据库操作 <a class="header-anchor" href="#_1-数据库操作" aria-label="Permalink to &quot;1. 数据库操作&quot;">​</a></h2><h3 id="创建数据库" tabindex="-1">创建数据库 <a class="header-anchor" href="#创建数据库" aria-label="Permalink to &quot;创建数据库&quot;">​</a></h3><p>PostgreSQL 创建数据库可以通过一下三种方式来创建</p><p><strong>1. create database 语句创建数据库</strong></p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">-- 创建数据库</span></span>
<span class="line"><span style="color:#C678DD;">create</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">database</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">pomelucedb</span><span style="color:#ABB2BF;">;</span></span></code></pre></div><p><strong>2. createdb 命令创建数据库</strong></p><ul><li><p>createdb 是一个 SQL 命令 create database 的封装</p></li><li><p>createdb 命令语法格式如下:</p></li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">createdb </span><span style="color:#E06C75;">[option...]</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[dbname [description]</span><span style="color:#ABB2BF;">]</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title"><strong>参数说明：</strong></p><ul><li><p><strong>dbname</strong>: 要创建的数据库名</p></li><li><p><strong>description</strong>: 关于新创建的数据库相关的说明</p></li><li><p><strong>options</strong>: 参数可选项，可以是以下值:</p></li></ul><table><thead><tr><th>选项</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td><strong>-D tablespace</strong></td><td style="text-align:left;">指定数据库默认表空间。</td></tr><tr><td><strong>-e</strong></td><td style="text-align:left;">将 createdb 生成的命令发送到服务端。</td></tr><tr><td><strong>-E encoding</strong></td><td style="text-align:left;">指定数据库的编码。</td></tr><tr><td><strong>-l locale</strong></td><td style="text-align:left;">指定数据库的语言环境。</td></tr><tr><td><strong>-T template</strong></td><td style="text-align:left;">指定创建此数据库的模板。</td></tr><tr><td><strong>--help</strong></td><td style="text-align:left;">显示 createdb 命令的帮助信息。</td></tr><tr><td><strong>-h host</strong></td><td style="text-align:left;">指定服务器的主机名。</td></tr><tr><td><strong>-p port</strong></td><td style="text-align:left;">指定服务器监听的端口，或者 socket 文件。</td></tr><tr><td><strong>-U username</strong></td><td style="text-align:left;">连接数据库的用户名。</td></tr><tr><td><strong>-w</strong></td><td style="text-align:left;">忽略输入密码。</td></tr><tr><td><strong>-W</strong></td><td style="text-align:left;">连接时强制要求输入密码。</td></tr></tbody></table></div><ul><li>打开终端, 使用 createdb 命令进行数据库创建</li></ul><div class="language-zsh"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#61AFEF;">$</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">createdb</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-h</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">localhost</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-p</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">5432</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-U</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">postgres</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">pomelucedb</span></span>
<span class="line"><span style="color:#61AFEF;">password</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">******</span></span></code></pre></div><blockquote><p>以上命令我们使用了超级用户 postgres 登录到主机地址为 localhost，端口号为 5432 的 PostgreSQL 数据库中并创建 pomelucedb 数据库</p></blockquote><p><strong>3. 使用可视化工具创建数据库, 以 DataGrip 为例</strong></p><ul><li>在 Database Explorer 栏右击当前已连接的 PostgreSQL 数据库, 选择 new &gt; Database</li></ul><p><img src="`+o+'" alt="可视化创建数据库1"></p><ul><li>在弹出的 Create 面板填写要创建的数据库信息, 然后点 ok, 创建成功</li></ul><p><img src="'+p+`" alt="可视化创建数据库2"></p><div class="tip custom-block"><p class="custom-block-title"><strong>PS:</strong></p><p><span style="background:yellow;color:black;">DataGrip 连接 PostgreSQL 时, 记得加上 -Duser.timezone=Asia/Shanghai (VM options), 否则会导致数据库时区变为 UTC</span></p></div><h3 id="查看数据库" tabindex="-1">查看数据库 <a class="header-anchor" href="#查看数据库" aria-label="Permalink to &quot;查看数据库&quot;">​</a></h3><p>在命令行交互窗口, 输入 <code>\\l</code> 命令查看所有数据库</p><div class="language-zsh"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#61AFEF;">➜</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">psql</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-U</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">root</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-d</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">lucasdb</span></span>
<span class="line"><span style="color:#61AFEF;">用户</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">root</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">的口令：psql</span><span style="color:#ABB2BF;"> (15.3)</span></span>
<span class="line"><span style="color:#61AFEF;">输入</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;help&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">来获取帮助信息.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">lucasdb</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">#</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">\\l</span></span>
<span class="line"><span style="color:#ABB2BF;">                                                     </span><span style="color:#61AFEF;">数据库列表</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#61AFEF;">名称</span><span style="color:#ABB2BF;">    |  </span><span style="color:#61AFEF;">拥有者</span><span style="color:#ABB2BF;">  | </span><span style="color:#61AFEF;">字元编码</span><span style="color:#ABB2BF;">  |    </span><span style="color:#61AFEF;">校对规则</span><span style="color:#ABB2BF;">    |    </span><span style="color:#61AFEF;">Ctype</span><span style="color:#ABB2BF;">    | </span><span style="color:#61AFEF;">ICU</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">Locale</span><span style="color:#ABB2BF;"> | </span><span style="color:#61AFEF;">Locale</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">Provider</span><span style="color:#ABB2BF;"> |       </span><span style="color:#61AFEF;">存取权限</span></span>
<span class="line"><span style="color:#61AFEF;">------------+----------+----------+-------------+-------------+------------+-----------------+--------------------</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">lucasdb</span><span style="color:#ABB2BF;">    | </span><span style="color:#61AFEF;">root</span><span style="color:#ABB2BF;">     | </span><span style="color:#61AFEF;">UTF8</span><span style="color:#ABB2BF;">     | </span><span style="color:#61AFEF;">en_US.UTF-8</span><span style="color:#ABB2BF;"> | </span><span style="color:#61AFEF;">en_US.UTF-8</span><span style="color:#ABB2BF;"> |            | </span><span style="color:#61AFEF;">libc</span><span style="color:#ABB2BF;">            |</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">pomelucedb</span><span style="color:#ABB2BF;"> | </span><span style="color:#61AFEF;">root</span><span style="color:#ABB2BF;">     | </span><span style="color:#61AFEF;">UTF8</span><span style="color:#ABB2BF;">     | </span><span style="color:#61AFEF;">en_US.UTF-8</span><span style="color:#ABB2BF;"> | </span><span style="color:#61AFEF;">en_US.UTF-8</span><span style="color:#ABB2BF;"> |            | </span><span style="color:#61AFEF;">libc</span><span style="color:#ABB2BF;">            |</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">postgres</span><span style="color:#ABB2BF;">   | </span><span style="color:#61AFEF;">postgres</span><span style="color:#ABB2BF;"> | </span><span style="color:#61AFEF;">UTF8</span><span style="color:#ABB2BF;">     | </span><span style="color:#61AFEF;">en_US.UTF-8</span><span style="color:#ABB2BF;"> | </span><span style="color:#61AFEF;">en_US.UTF-8</span><span style="color:#ABB2BF;"> |            | </span><span style="color:#61AFEF;">libc</span><span style="color:#ABB2BF;">            | =Tc/postgres      </span><span style="color:#98C379;">+</span></span>
<span class="line"><span style="color:#ABB2BF;">            |          |          |             |             |            |                 | </span><span style="color:#E06C75;">postgres</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">CTc/postgres</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">template0</span><span style="color:#ABB2BF;">  | </span><span style="color:#61AFEF;">postgres</span><span style="color:#ABB2BF;"> | </span><span style="color:#61AFEF;">UTF8</span><span style="color:#ABB2BF;">     | </span><span style="color:#61AFEF;">en_US.UTF-8</span><span style="color:#ABB2BF;"> | </span><span style="color:#61AFEF;">en_US.UTF-8</span><span style="color:#ABB2BF;"> |            | </span><span style="color:#61AFEF;">libc</span><span style="color:#ABB2BF;">            | =c/postgres       </span><span style="color:#98C379;">+</span></span>
<span class="line"><span style="color:#ABB2BF;">            |          |          |             |             |            |                 | </span><span style="color:#E06C75;">postgres</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">CTc/postgres</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">template1</span><span style="color:#ABB2BF;">  | </span><span style="color:#61AFEF;">postgres</span><span style="color:#ABB2BF;"> | </span><span style="color:#61AFEF;">UTF8</span><span style="color:#ABB2BF;">     | </span><span style="color:#61AFEF;">en_US.UTF-8</span><span style="color:#ABB2BF;"> | </span><span style="color:#61AFEF;">en_US.UTF-8</span><span style="color:#ABB2BF;"> |            | </span><span style="color:#61AFEF;">libc</span><span style="color:#ABB2BF;">            | =c/postgres       </span><span style="color:#98C379;">+</span></span>
<span class="line"><span style="color:#ABB2BF;">            |          |          |             |             |            |                 | </span><span style="color:#E06C75;">postgres</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">CTc/postgres</span></span>
<span class="line"><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">5</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">行记录</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">lucasdb</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">#</span></span></code></pre></div><h3 id="切换数据库" tabindex="-1">切换数据库 <a class="header-anchor" href="#切换数据库" aria-label="Permalink to &quot;切换数据库&quot;">​</a></h3><p>在命令行交互窗口, 使用 <code>\\c &#39;数据库名&#39;</code> 命令来切换数据库</p><div class="language-zsh"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E06C75;">lucasdb</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">#</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">\\c</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">pomelucedb</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#61AFEF;">您现在已经连接到数据库</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;pomelucedb&quot;,用户</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;root&quot;.</span></span>
<span class="line"><span style="color:#E06C75;">pomelucedb</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">#</span></span></code></pre></div><h3 id="修改数据库" tabindex="-1">修改数据库 <a class="header-anchor" href="#修改数据库" aria-label="Permalink to &quot;修改数据库&quot;">​</a></h3><p>数据库的修改语法为: <code>alter database &#39;数据库名&#39; &#39;option_name&#39; [ = value ]</code></p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">-- 修改数据库名</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">database</span><span style="color:#ABB2BF;"> pomelucedb rename </span><span style="color:#C678DD;">to</span><span style="color:#ABB2BF;"> pomelucedb2;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 修改数据库所有者</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">database</span><span style="color:#ABB2BF;"> pomelucedb2 </span><span style="color:#C678DD;">owner</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">to</span><span style="color:#ABB2BF;"> postgres;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 修改数据库连接数</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">database</span><span style="color:#ABB2BF;"> pomelucedb2 </span><span style="color:#C678DD;">with</span><span style="color:#ABB2BF;"> connection </span><span style="color:#C678DD;">limit</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">300</span><span style="color:#ABB2BF;">;</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">Ps:</p><p>需要注意的是: 执行 <code>alter database</code> 语句通常需要具有适当权限的用户才能执行, 确保以具有足够权限的用户身份连接到 PostgreSQL 数据库以进行所需的更改</p></div><h3 id="删除数据库" tabindex="-1">删除数据库 <a class="header-anchor" href="#删除数据库" aria-label="Permalink to &quot;删除数据库&quot;">​</a></h3><p>PostgreSQL 删除数据库可以用以下三种方式:</p><p><strong>1. 使用 <code>drop database</code> SQL 语句来删除</strong></p><p>语法: drop database [if exists] name</p><p>参数说明：</p><ul><li>IF EXISTS: 如果数据库不存在则发出提示信息, 而不是错误信息</li><li>name: 要删除的数据库的名称</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">-- 删除数据库</span></span>
<span class="line"><span style="color:#C678DD;">drop</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">database</span><span style="color:#ABB2BF;"> pomelucedb2;</span></span></code></pre></div><p><strong>2. 使用 dropdb 命令来删除</strong></p><p><strong>语法</strong>: dropdb [connection-option...] [option...] dbname</p><p>参数说明：</p><ul><li>dbname: 要删除的数据库名</li><li>options: 参数可选项, 可以是以下值</li></ul><table><thead><tr><th>选项</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td><strong>-e</strong></td><td style="text-align:left;">显示 dropdb 生成的命令并发送到数据库服务器。</td></tr><tr><td><strong>-i</strong></td><td style="text-align:left;">在做删除的工作之前发出一个验证提示。</td></tr><tr><td><strong>-V</strong></td><td style="text-align:left;">打印 dropdb 版本并退出。</td></tr><tr><td><strong>--if-exists</strong></td><td style="text-align:left;">如果数据库不存在则发出提示信息，而不是错误信息。</td></tr><tr><td><strong>--help</strong></td><td style="text-align:left;">显示有关 dropdb 命令的帮助信息。</td></tr><tr><td><strong>-h host</strong></td><td style="text-align:left;">指定运行服务器的主机名。</td></tr><tr><td><strong>-p port</strong></td><td style="text-align:left;">指定服务器监听的端口，或者 socket 文件。</td></tr><tr><td><strong>-U username</strong></td><td style="text-align:left;">连接数据库的用户名。</td></tr><tr><td><strong>-w</strong></td><td style="text-align:left;">连接时忽略输入密码。</td></tr><tr><td><strong>-W</strong></td><td style="text-align:left;">连接时强制要求输入密码。</td></tr><tr><td><strong>--maintenance-db=dbname</strong></td><td style="text-align:left;">删除数据库时指定连接的数据库，默认为 postgres，如果它不存在则使用 template1。</td></tr></tbody></table><div class="language-zsh"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#61AFEF;">$</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">dropdb</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-h</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">localhost</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-p</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">5432</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-U</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">postgres</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">pomelucedb</span></span>
<span class="line"><span style="color:#61AFEF;">password</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">******</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>dropdb 是 DROP DATABASE 的包装器</p><p>dropdb 用于删除 PostgreSQL 数据库</p><p>dropdb 命令只能由超级管理员或数据库拥有者执行</p></div><p><strong>3. 使用可视化工具</strong></p><p>以 DataGrip 为例, 右击数据库, 选择 Drop, 在弹出窗口点击确认, 删除数据库;</p><p><img src="`+t+`" alt="image-20230716114154990"></p><h2 id="_2-数据表操作" tabindex="-1">2. 数据表操作 <a class="header-anchor" href="#_2-数据表操作" aria-label="Permalink to &quot;2. 数据表操作&quot;">​</a></h2><h3 id="创建表" tabindex="-1">创建表 <a class="header-anchor" href="#创建表" aria-label="Permalink to &quot;创建表&quot;">​</a></h3><ol><li>语法:</li></ol><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">create</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">table_name</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">	column1 datatype,</span></span>
<span class="line"><span style="color:#ABB2BF;">    column2 datatype,</span></span>
<span class="line"><span style="color:#ABB2BF;">    column3 datatype,</span></span>
<span class="line"><span style="color:#ABB2BF;">    ...</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">primary key</span><span style="color:#ABB2BF;"> (一列或多列)</span></span>
<span class="line"><span style="color:#ABB2BF;">)</span></span></code></pre></div><ul><li><p><code>create table</code> 是一个关键词, 用于告诉数据库系统将创建一个数据表</p></li><li><p>表名字必需在同一模式中的其它表、 序列、索引、视图或外部表名字中唯一</p></li><li><p><code>create table</code> 在当前数据库创建一个新的空白表, 该表将由发出此命令的用户所拥有</p></li></ul><ol start="2"><li>实例</li></ol><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">-- 创建数据表</span></span>
<span class="line"><span style="color:#C678DD;">create</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">users</span></span>
<span class="line"><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">    id        </span><span style="color:#C678DD;">serial</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">primary key</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">not null</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">name</span><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">)        </span><span style="color:#C678DD;">not null</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    age       </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">not null</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    email     </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">)        </span><span style="color:#C678DD;">not null</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    introduce </span><span style="color:#C678DD;">text</span></span>
<span class="line"><span style="color:#ABB2BF;">);</span></span></code></pre></div><h3 id="更新表" tabindex="-1">更新表 <a class="header-anchor" href="#更新表" aria-label="Permalink to &quot;更新表&quot;">​</a></h3><ol><li><p>增加列: alter table &#39;table_name&#39; add column &#39;col_name&#39; &#39;datatype&#39;</p></li><li><p>移除列: alter table &#39;table_name&#39; drop column &#39;col_name&#39;</p></li><li><p>增加约束: alter table &#39;table_name&#39; add constraint &#39;约束名称&#39; &#39;option&#39; [ = value ]</p></li><li><p>移除约束: alter tabel &#39;table_name&#39; drop constraint &#39;约束名称&#39;</p></li><li><p>修改默认值: alter table &#39;table_name&#39; alter column &#39;col_name&#39; set default [ = vaule ]</p></li><li><p>修改数据类型: alter table &#39;table_name&#39; alter column &#39;col_name&#39; type &#39;new_datatype&#39;</p></li><li><p>重名列: alter table &#39;table_name&#39; alter column &#39;old_col_name&#39; to &#39;new_col_name&#39;</p></li><li><p>重命名表: alter table &#39;table_name&#39; alter rename to &#39;new_table_name&#39;</p></li></ol><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">--  增加列</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> users </span><span style="color:#C678DD;">add</span><span style="color:#ABB2BF;"> column phone </span><span style="color:#C678DD;">char</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">11</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 移除列</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> users </span><span style="color:#C678DD;">drop</span><span style="color:#ABB2BF;"> column phone;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 移除列并且删除列中的数据</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> users </span><span style="color:#C678DD;">drop</span><span style="color:#ABB2BF;"> column phone cascade;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 增加约束</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> users </span><span style="color:#C678DD;">add</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">constraint</span><span style="color:#ABB2BF;"> users_email_key </span><span style="color:#C678DD;">unique</span><span style="color:#ABB2BF;"> (email);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 移除约束</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> users </span><span style="color:#C678DD;">drop</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">constraint</span><span style="color:#ABB2BF;"> users_email_key;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 修改列的默认值</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> users </span><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> column age </span><span style="color:#C678DD;">set</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">18</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 移除列的默认值</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> users </span><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> column age </span><span style="color:#C678DD;">drop</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 修改列的数据类型</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> users </span><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> column age </span><span style="color:#C678DD;">type</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">bigint</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 修改列名</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> users rename column email </span><span style="color:#C678DD;">to</span><span style="color:#ABB2BF;"> mail;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 修改数据表名</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> users rename </span><span style="color:#C678DD;">to</span><span style="color:#ABB2BF;"> db_user;</span></span></code></pre></div><h3 id="删除表" tabindex="-1">删除表 <a class="header-anchor" href="#删除表" aria-label="Permalink to &quot;删除表&quot;">​</a></h3><ul><li>语法: drop table [table_name1, table_name2, ...]</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">drop</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> db_user</span></span></code></pre></div><h2 id="_3-表注释" tabindex="-1">3. 表注释 <a class="header-anchor" href="#_3-表注释" aria-label="Permalink to &quot;3. 表注释&quot;">​</a></h2><p>在 PostgreSQL 中无法在创建数据表时对表和 column 进行注释, 需要在创建完成之后, 通过 comment 语句来添加</p><ul><li>语法: comment on option_name [ = value ]</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">comment on table users is </span><span style="color:#98C379;">&#39;用户表&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">comment on column users.id is </span><span style="color:#98C379;">&#39;用户 ID&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">comment on column users.name is </span><span style="color:#98C379;">&#39;姓名&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">comment on column users.age is </span><span style="color:#98C379;">&#39;年龄&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">comment on column users.email is </span><span style="color:#98C379;">&#39;邮箱&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">comment on column users.introduce is </span><span style="color:#98C379;">&#39;介绍&#39;</span><span style="color:#ABB2BF;">;</span></span></code></pre></div>`,63),c=[r];function B(y,i,d,F,A,D){return a(),l("div",null,c)}const b=s(e,[["render",B]]);export{u as __pageData,b as default};
