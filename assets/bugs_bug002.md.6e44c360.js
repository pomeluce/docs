import{_ as s,o as a,c as l,V as o}from"./chunks/framework.a215caf7.js";const g=JSON.parse('{"title":"Struts 配置通配符报错","description":"","frontmatter":{},"headers":[],"relativePath":"bugs/bug002.md","filePath":"bugs/bug002.md","lastUpdated":1689440421000}'),t={name:"bugs/bug002.md"},n=o(`<h1 id="struts-配置通配符报错" tabindex="-1">Struts 配置通配符报错 <a class="header-anchor" href="#struts-配置通配符报错" aria-label="Permalink to &quot;Struts 配置通配符报错&quot;">​</a></h1><h2 id="_1-原因分析" tabindex="-1">1.原因分析 <a class="header-anchor" href="#_1-原因分析" aria-label="Permalink to &quot;1.原因分析&quot;">​</a></h2><ul><li>struts 2.5 版本之后, 为了提升安全性，默认开启了严格的方法调用</li></ul><h2 id="_2-解决方案" tabindex="-1">2.解决方案 <a class="header-anchor" href="#_2-解决方案" aria-label="Permalink to &quot;2.解决方案&quot;">​</a></h2><ol><li>在 package 上面, 设置 strict-method-invocation 为 false, 关闭严格方法调用</li></ol><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">package</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;struts&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">namespace</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">extends</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;struts-default&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">strict-method-invocation</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;false&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">package</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre></div><ol start="2"><li>在 package 中设置 global-allowed-methods 开启通配符方法调用</li></ol><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">global-allowed-methods</span><span style="color:#ABB2BF;">&gt;regex:.*&lt;/</span><span style="color:#E06C75;">global-allowed-methods</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre></div><ol start="3"><li>使用通配符调用方法时, 内部会验证是否允许访问该方法, 所以可以在 action 中设置允许通配符访问的方法</li></ol><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">allowed-methods</span><span style="color:#ABB2BF;">&gt;insert, delete&lt;/</span><span style="color:#E06C75;">allowed-methods</span><span style="color:#ABB2BF;">&gt; 使用时放在 &lt;</span><span style="color:#E06C75;">result</span><span style="color:#ABB2BF;">&gt;...&lt;/</span><span style="color:#E06C75;">result</span><span style="color:#ABB2BF;">&gt; 之后</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">PS: xml 头部更新为 2.5 版本:</p><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">&lt;?</span><span style="color:#E06C75;">xml</span><span style="color:#D19A66;"> version</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;1.0&quot;</span><span style="color:#D19A66;"> encoding</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;UTF-8&quot;</span><span style="color:#ABB2BF;">?&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;!</span><span style="color:#C678DD;">DOCTYPE</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">struts</span><span style="color:#ABB2BF;"> PUBLIC</span></span>
<span class="line"><span style="color:#ABB2BF;">        &quot;-//Apache Software Foundation//DTD Struts Configuration 2.5//EN&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &quot;http://struts.apache.org/dtds/struts-2.5.dtd&quot;&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">strust</span><span style="color:#ABB2BF;">&gt;...&lt;/</span><span style="color:#E06C75;">strust</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre></div></div>`,11),e=[n];function p(c,r,B,i,d,u){return a(),l("div",null,e)}const A=s(t,[["render",p]]);export{g as __pageData,A as default};
