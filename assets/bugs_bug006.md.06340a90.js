import{_ as s,o as a,c as o,V as n}from"./chunks/framework.a215caf7.js";const m=JSON.parse('{"title":"LocalDateTime 转 Json 返回时间戳","description":"","frontmatter":{},"headers":[],"relativePath":"bugs/bug006.md","filePath":"bugs/bug006.md","lastUpdated":1689440421000}'),l={name:"bugs/bug006.md"},e=n(`<h1 id="localdatetime-转-json-返回时间戳" tabindex="-1">LocalDateTime 转 Json 返回时间戳 <a class="header-anchor" href="#localdatetime-转-json-返回时间戳" aria-label="Permalink to &quot;LocalDateTime 转 Json 返回时间戳&quot;">​</a></h1><h2 id="_1-现象及原因" tabindex="-1">1.现象及原因 <a class="header-anchor" href="#_1-现象及原因" aria-label="Permalink to &quot;1.现象及原因&quot;">​</a></h2><ol><li>现象: 在 spirngboot 中将数据以 json 形式返回前端, 实体类中的时间类型为 LocalDateTime 类型, springboot 默认的 jackson 会默认将其转换为时间戳返回, fastjson 也一样.</li><li>原因: LocalDateTime 类型为 JDK8 之后的新日期类型, 原来的 @DateTimeFormat 注解无法进行转换处理, jackson 和 fastjson 也无法格式化转换处理</li></ol><h2 id="_2-解决方案" tabindex="-1">2.解决方案 <a class="header-anchor" href="#_2-解决方案" aria-label="Permalink to &quot;2.解决方案&quot;">​</a></h2><p>在 jackson 中其实是能够格式化处理该日期类型的, 只不过默认转换为时间戳, 需要手动设置</p><ul><li>注解</li></ul><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">JsonFormat</span><span style="color:#E06C75;">(</span><span style="color:#D19A66;">pattern</span><span style="color:#E06C75;"> </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#98C379;">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#D19A66;">timezone</span><span style="color:#E06C75;"> </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#98C379;">&quot;GMT+8&quot;</span><span style="color:#E06C75;">)</span></span></code></pre></div><ul><li>依赖</li></ul><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">dependency</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;com.fasterxml.jackson.datatype&lt;/</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;jackson-datatype-jsr310&lt;/</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">version</span><span style="color:#ABB2BF;">&gt;2.13.3&lt;/</span><span style="color:#E06C75;">version</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">dependency</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre></div><ul><li>application.properties</li></ul><div class="language-properties"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 配置 jackson 不要将 LocalDateTime 转换为时间戳</span></span>
<span class="line"><span style="color:#C678DD;">spring.jackson.serialization.write-dates-as-timestamps</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">false</span></span></code></pre></div>`,11),t=[e];function p(c,r,i,d,y,B){return a(),o("div",null,t)}const _=s(l,[["render",p]]);export{m as __pageData,_ as default};
